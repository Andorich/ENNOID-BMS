EESchema Schematic File Version 4
LIBS:BMS-Master-cache
EELAYER 29 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 27 27
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Amplifier_Operational:OPA376xxD U?
U 1 1 5C519D88
P 6600 3850
F 0 "U?" H 6700 3950 50  0000 L CNN
F 1 "OPA376xxD" H 6700 4050 50  0000 L CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 6500 3650 50  0001 L CNN
F 3 "http://www.ti.com/lit/ds/symlink/opa376.pdf" H 6750 4000 50  0001 C CNN
	1    6600 3850
	1    0    0    -1  
$EndComp
$Comp
L Logic_LevelTranslator:SN74LVC1T45DBV U?
U 1 1 5C51B27D
P 2750 3750
F 0 "U?" H 3194 3796 50  0000 L CNN
F 1 "SN74LVC1T45DBV" H 3194 3705 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6" H 2750 3300 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/sn74lvc1t45.pdf" H 1850 3100 50  0001 C CNN
	1    2750 3750
	1    0    0    -1  
$EndComp
$Comp
L Diode:BAT54S D?
U 1 1 5C51BDEE
P 1400 3750
F 0 "D?" V 1300 4100 50  0000 L CNN
F 1 "BAT54S" V 1200 3900 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1475 3875 50  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 1280 3750 50  0001 C CNN
	1    1400 3750
	0    -1   -1   0   
$EndComp
$Comp
L Diode:BAT54S D?
U 1 1 5C51E2E0
P 7500 3850
F 0 "D?" V 7400 4200 50  0000 L CNN
F 1 "BAT54S" V 7300 4000 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 7575 3975 50  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 7380 3850 50  0001 C CNN
	1    7500 3850
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5C51F7B5
P 2750 4350
F 0 "#PWR?" H 2750 4100 50  0001 C CNN
F 1 "GND" H 2755 4177 50  0000 C CNN
F 2 "" H 2750 4350 50  0001 C CNN
F 3 "" H 2750 4350 50  0001 C CNN
	1    2750 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 4350 2750 4150
$Comp
L power:GND #PWR?
U 1 1 5C51FCF3
P 6500 4350
F 0 "#PWR?" H 6500 4100 50  0001 C CNN
F 1 "GND" H 6505 4177 50  0000 C CNN
F 2 "" H 6500 4350 50  0001 C CNN
F 3 "" H 6500 4350 50  0001 C CNN
	1    6500 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	6500 4150 6500 4350
$Comp
L Device:R R?
U 1 1 5C520069
P 4050 3750
F 0 "R?" V 4257 3750 50  0000 C CNN
F 1 "910" V 4166 3750 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 3980 3750 50  0001 C CNN
F 3 "~" H 4050 3750 50  0001 C CNN
	1    4050 3750
	0    -1   -1   0   
$EndComp
Text HLabel 800  3750 0    50   Input ~ 0
IN
$Comp
L Device:R R?
U 1 1 5C521BE6
P 1000 3750
F 0 "R?" V 1207 3750 50  0000 C CNN
F 1 "220" V 1116 3750 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 930 3750 50  0001 C CNN
F 3 "~" H 1000 3750 50  0001 C CNN
	1    1000 3750
	0    -1   -1   0   
$EndComp
Wire Wire Line
	800  3750 850  3750
Wire Wire Line
	1150 3750 1600 3750
$Comp
L Device:R R?
U 1 1 5C522EB6
P 1950 3900
F 0 "R?" H 2020 3946 50  0000 L CNN
F 1 "100k" H 2020 3855 50  0000 L CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 1880 3900 50  0001 C CNN
F 3 "~" H 1950 3900 50  0001 C CNN
	1    1950 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	1600 3750 1950 3750
Connection ~ 1600 3750
Wire Wire Line
	1950 3750 2350 3750
Connection ~ 1950 3750
$Comp
L power:GND #PWR?
U 1 1 5C52353F
P 1950 4350
F 0 "#PWR?" H 1950 4100 50  0001 C CNN
F 1 "GND" H 1955 4177 50  0000 C CNN
F 2 "" H 1950 4350 50  0001 C CNN
F 3 "" H 1950 4350 50  0001 C CNN
	1    1950 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1950 4050 1950 4350
$Comp
L power:GND #PWR?
U 1 1 5C5237C9
P 1400 4350
F 0 "#PWR?" H 1400 4100 50  0001 C CNN
F 1 "GND" H 1405 4177 50  0000 C CNN
F 2 "" H 1400 4350 50  0001 C CNN
F 3 "" H 1400 4350 50  0001 C CNN
	1    1400 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1400 4050 1400 4350
$Comp
L power:+5V #PWR?
U 1 1 5C5240B5
P 1400 3300
F 0 "#PWR?" H 1400 3150 50  0001 C CNN
F 1 "+5V" H 1415 3473 50  0000 C CNN
F 2 "" H 1400 3300 50  0001 C CNN
F 3 "" H 1400 3300 50  0001 C CNN
	1    1400 3300
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 5C5245FE
P 2650 3000
F 0 "#PWR?" H 2650 2850 50  0001 C CNN
F 1 "+5V" H 2665 3173 50  0000 C CNN
F 2 "" H 2650 3000 50  0001 C CNN
F 3 "" H 2650 3000 50  0001 C CNN
	1    2650 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	3150 3750 3900 3750
$Comp
L Device:R R?
U 1 1 5C52515C
P 4550 3750
F 0 "R?" V 4757 3750 50  0000 C CNN
F 1 "6.8k" V 4666 3750 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 4480 3750 50  0001 C CNN
F 3 "~" H 4550 3750 50  0001 C CNN
	1    4550 3750
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C?
U 1 1 5C525442
P 4300 3900
F 0 "C?" H 4185 3854 50  0000 R CNN
F 1 "470p" H 4185 3945 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 4338 3750 50  0001 C CNN
F 3 "~" H 4300 3900 50  0001 C CNN
	1    4300 3900
	-1   0    0    1   
$EndComp
Wire Wire Line
	4200 3750 4300 3750
Wire Wire Line
	4300 3750 4400 3750
Connection ~ 4300 3750
$Comp
L power:GND #PWR?
U 1 1 5C525AEA
P 4300 4350
F 0 "#PWR?" H 4300 4100 50  0001 C CNN
F 1 "GND" H 4305 4177 50  0000 C CNN
F 2 "" H 4300 4350 50  0001 C CNN
F 3 "" H 4300 4350 50  0001 C CNN
	1    4300 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4300 4050 4300 4350
$Comp
L Device:R R?
U 1 1 5C52632B
P 5150 3750
F 0 "R?" V 5357 3750 50  0000 C CNN
F 1 "5.1k" V 5266 3750 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 5080 3750 50  0001 C CNN
F 3 "~" H 5150 3750 50  0001 C CNN
	1    5150 3750
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C?
U 1 1 5C526A45
P 5400 3900
F 0 "C?" H 5285 3854 50  0000 R CNN
F 1 "150p" H 5285 3945 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 5438 3750 50  0001 C CNN
F 3 "~" H 5400 3900 50  0001 C CNN
	1    5400 3900
	-1   0    0    1   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5C528A5F
P 5400 4350
F 0 "#PWR?" H 5400 4100 50  0001 C CNN
F 1 "GND" H 5405 4177 50  0000 C CNN
F 2 "" H 5400 4350 50  0001 C CNN
F 3 "" H 5400 4350 50  0001 C CNN
	1    5400 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 4050 5400 4350
Wire Wire Line
	5300 3750 5400 3750
$Comp
L Device:R R?
U 1 1 5C52B74E
P 8100 3850
F 0 "R?" V 8307 3850 50  0000 C CNN
F 1 "220" V 8216 3850 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 8030 3850 50  0001 C CNN
F 3 "~" H 8100 3850 50  0001 C CNN
	1    8100 3850
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C?
U 1 1 5C52A017
P 4850 3100
F 0 "C?" H 4735 3054 50  0000 R CNN
F 1 "330p" H 4735 3145 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 4888 2950 50  0001 C CNN
F 3 "~" H 4850 3100 50  0001 C CNN
	1    4850 3100
	-1   0    0    1   
$EndComp
Wire Wire Line
	5400 3750 6300 3750
Connection ~ 5400 3750
Wire Wire Line
	6900 3850 7200 3850
Wire Wire Line
	4700 3750 4850 3750
Wire Wire Line
	4850 3250 4850 3750
Connection ~ 4850 3750
Wire Wire Line
	4850 3750 5000 3750
Connection ~ 7200 3850
Wire Wire Line
	7200 3850 7700 3850
Wire Wire Line
	6100 3950 6300 3950
$Comp
L power:+5V #PWR?
U 1 1 5C5311AE
P 6500 2900
F 0 "#PWR?" H 6500 2750 50  0001 C CNN
F 1 "+5V" H 6515 3073 50  0000 C CNN
F 2 "" H 6500 2900 50  0001 C CNN
F 3 "" H 6500 2900 50  0001 C CNN
	1    6500 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6500 3550 6500 2950
$Comp
L power:+5V #PWR?
U 1 1 5C531A11
P 7500 3500
F 0 "#PWR?" H 7500 3350 50  0001 C CNN
F 1 "+5V" H 7515 3673 50  0000 C CNN
F 2 "" H 7500 3500 50  0001 C CNN
F 3 "" H 7500 3500 50  0001 C CNN
	1    7500 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	7500 3550 7500 3500
$Comp
L power:GND #PWR?
U 1 1 5C532473
P 7500 4300
F 0 "#PWR?" H 7500 4050 50  0001 C CNN
F 1 "GND" H 7505 4127 50  0000 C CNN
F 2 "" H 7500 4300 50  0001 C CNN
F 3 "" H 7500 4300 50  0001 C CNN
	1    7500 4300
	1    0    0    -1  
$EndComp
Wire Wire Line
	7500 4150 7500 4300
Wire Wire Line
	2650 3000 2650 3050
$Comp
L Device:C C?
U 1 1 5C533344
P 3300 3200
F 0 "C?" H 3185 3154 50  0000 R CNN
F 1 "100n" H 3185 3245 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 3338 3050 50  0001 C CNN
F 3 "~" H 3300 3200 50  0001 C CNN
	1    3300 3200
	-1   0    0    1   
$EndComp
$Comp
L Device:C C?
U 1 1 5C5335E5
P 6850 3100
F 0 "C?" H 6735 3054 50  0000 R CNN
F 1 "100n" H 6735 3145 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 6888 2950 50  0001 C CNN
F 3 "~" H 6850 3100 50  0001 C CNN
	1    6850 3100
	-1   0    0    1   
$EndComp
Wire Wire Line
	3300 3050 2650 3050
Connection ~ 2650 3050
Wire Wire Line
	2650 3050 2650 3350
$Comp
L power:GND #PWR?
U 1 1 5C534162
P 3300 3450
F 0 "#PWR?" H 3300 3200 50  0001 C CNN
F 1 "GND" H 3305 3277 50  0000 C CNN
F 2 "" H 3300 3450 50  0001 C CNN
F 3 "" H 3300 3450 50  0001 C CNN
	1    3300 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	3300 3450 3300 3350
Wire Wire Line
	7200 2600 7200 3850
Wire Wire Line
	6100 2600 6100 3950
Wire Wire Line
	6100 2600 7200 2600
Wire Wire Line
	6100 2600 4850 2600
Wire Wire Line
	4850 2600 4850 2950
Connection ~ 6100 2600
Wire Wire Line
	6500 2950 6850 2950
Connection ~ 6500 2950
Wire Wire Line
	6500 2950 6500 2900
$Comp
L power:GND #PWR?
U 1 1 5C53742E
P 6850 3350
F 0 "#PWR?" H 6850 3100 50  0001 C CNN
F 1 "GND" H 6855 3177 50  0000 C CNN
F 2 "" H 6850 3350 50  0001 C CNN
F 3 "" H 6850 3350 50  0001 C CNN
	1    6850 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	6850 3350 6850 3250
Wire Wire Line
	1400 3300 1400 3450
Text HLabel 10800 3850 2    50   Input ~ 0
SCL
Text HLabel 10800 3750 2    50   Input ~ 0
SDA
$Comp
L Analog_ADC:INA226 U?
U 1 1 5C2C3471
P 9150 3750
F 0 "U?" H 8900 4350 50  0000 C CNN
F 1 "INA226" H 8950 4250 50  0000 C CNN
F 2 "Package_SO:MSOP-10_3x3mm_P0.5mm" H 9200 3850 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/ina226.pdf" H 9500 3650 50  0001 C CNN
	1    9150 3750
	1    0    0    -1  
$EndComp
Text HLabel 8250 2850 1    50   Input ~ 0
VBUS
Wire Wire Line
	8250 3850 8750 3850
$Comp
L power:GND #PWR?
U 1 1 5C2CDC77
P 8550 4400
F 0 "#PWR?" H 8550 4150 50  0001 C CNN
F 1 "GND" H 8555 4227 50  0000 C CNN
F 2 "" H 8550 4400 50  0001 C CNN
F 3 "" H 8550 4400 50  0001 C CNN
	1    8550 4400
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5C2CE86A
P 8250 3250
F 0 "C?" H 8135 3204 50  0000 R CNN
F 1 "100n" H 8135 3295 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 8288 3100 50  0001 C CNN
F 3 "~" H 8250 3250 50  0001 C CNN
	1    8250 3250
	-1   0    0    1   
$EndComp
Wire Wire Line
	8250 3100 8250 3000
Wire Wire Line
	8650 3000 8650 3450
Wire Wire Line
	8650 3450 8750 3450
Wire Wire Line
	8250 3000 8650 3000
Connection ~ 8250 3000
Wire Wire Line
	8250 3000 8250 2850
$Comp
L power:GND #PWR?
U 1 1 5C2D0B6B
P 8250 3450
F 0 "#PWR?" H 8250 3200 50  0001 C CNN
F 1 "GND" H 8255 3277 50  0000 C CNN
F 2 "" H 8250 3450 50  0001 C CNN
F 3 "" H 8250 3450 50  0001 C CNN
	1    8250 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	8250 3400 8250 3450
$Comp
L Device:R R?
U 1 1 5C2D18D6
P 8550 4150
F 0 "R?" V 8757 4150 50  0000 C CNN
F 1 "4.75k" V 8666 4150 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 8480 4150 50  0001 C CNN
F 3 "~" H 8550 4150 50  0001 C CNN
	1    8550 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	8550 4000 8550 3950
Wire Wire Line
	8550 3950 8750 3950
$Comp
L Device:C C?
U 1 1 5C2D395A
P 8100 4150
F 0 "C?" H 7985 4104 50  0000 R CNN
F 1 "100n" H 7985 4195 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 8138 4000 50  0001 C CNN
F 3 "~" H 8100 4150 50  0001 C CNN
	1    8100 4150
	-1   0    0    1   
$EndComp
Wire Wire Line
	8100 4000 8100 3950
Wire Wire Line
	8100 3950 8550 3950
Connection ~ 8550 3950
$Comp
L power:GND #PWR?
U 1 1 5C2D6AB0
P 9150 4400
F 0 "#PWR?" H 9150 4150 50  0001 C CNN
F 1 "GND" H 9155 4227 50  0000 C CNN
F 2 "" H 9150 4400 50  0001 C CNN
F 3 "" H 9150 4400 50  0001 C CNN
	1    9150 4400
	1    0    0    -1  
$EndComp
Wire Wire Line
	9150 4250 9150 4400
Wire Wire Line
	8550 4300 8550 4400
$Comp
L power:GND #PWR?
U 1 1 5C2D8754
P 8100 4400
F 0 "#PWR?" H 8100 4150 50  0001 C CNN
F 1 "GND" H 8105 4227 50  0000 C CNN
F 2 "" H 8100 4400 50  0001 C CNN
F 3 "" H 8100 4400 50  0001 C CNN
	1    8100 4400
	1    0    0    -1  
$EndComp
Wire Wire Line
	8100 4300 8100 4400
$Comp
L Device:C C?
U 1 1 5C2DB571
P 9350 2850
F 0 "C?" H 9235 2804 50  0000 R CNN
F 1 "100n" H 9235 2895 50  0000 R CNN
F 2 "Capacitors_SMD:C_0603_HandSoldering" H 9388 2700 50  0001 C CNN
F 3 "~" H 9350 2850 50  0001 C CNN
	1    9350 2850
	-1   0    0    1   
$EndComp
Wire Wire Line
	9150 3250 9150 2700
Wire Wire Line
	9150 2700 9250 2700
$Comp
L power:GND #PWR?
U 1 1 5C2DC590
P 9350 3050
F 0 "#PWR?" H 9350 2800 50  0001 C CNN
F 1 "GND" H 9355 2877 50  0000 C CNN
F 2 "" H 9350 3050 50  0001 C CNN
F 3 "" H 9350 3050 50  0001 C CNN
	1    9350 3050
	1    0    0    -1  
$EndComp
Wire Wire Line
	9350 3000 9350 3050
$Comp
L power:+5V #PWR?
U 1 1 5C2DD664
P 9250 2550
F 0 "#PWR?" H 9250 2400 50  0001 C CNN
F 1 "+5V" H 9265 2723 50  0000 C CNN
F 2 "" H 9250 2550 50  0001 C CNN
F 3 "" H 9250 2550 50  0001 C CNN
	1    9250 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	9250 2550 9250 2700
Connection ~ 9250 2700
Wire Wire Line
	9250 2700 9350 2700
$Comp
L Device:R R?
U 1 1 5C2DE78B
P 10350 3350
F 0 "R?" V 10557 3350 50  0000 C CNN
F 1 "4.75k" V 10466 3350 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 10280 3350 50  0001 C CNN
F 3 "~" H 10350 3350 50  0001 C CNN
	1    10350 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5C2DEEE2
P 10700 3350
F 0 "R?" V 10907 3350 50  0000 C CNN
F 1 "4.75k" V 10816 3350 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 10630 3350 50  0001 C CNN
F 3 "~" H 10700 3350 50  0001 C CNN
	1    10700 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	10350 3500 10350 3750
Connection ~ 10350 3750
Wire Wire Line
	10350 3750 10800 3750
Connection ~ 10700 3850
Wire Wire Line
	10700 3850 10800 3850
$Comp
L power:+5V #PWR?
U 1 1 5C2E2677
P 10350 3100
F 0 "#PWR?" H 10350 2950 50  0001 C CNN
F 1 "+5V" H 10365 3273 50  0000 C CNN
F 2 "" H 10350 3100 50  0001 C CNN
F 3 "" H 10350 3100 50  0001 C CNN
	1    10350 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	10350 3100 10350 3200
$Comp
L power:+5V #PWR?
U 1 1 5C2E39D6
P 10700 3100
F 0 "#PWR?" H 10700 2950 50  0001 C CNN
F 1 "+5V" H 10715 3273 50  0000 C CNN
F 2 "" H 10700 3100 50  0001 C CNN
F 3 "" H 10700 3100 50  0001 C CNN
	1    10700 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	10700 3100 10700 3200
Wire Wire Line
	10700 3500 10700 3850
Wire Wire Line
	7700 3850 7950 3850
Connection ~ 7700 3850
Wire Wire Line
	9550 3750 10350 3750
Wire Wire Line
	9550 3850 10700 3850
$Comp
L power:GND #PWR?
U 1 1 5C300D99
P 9900 3450
F 0 "#PWR?" H 9900 3200 50  0001 C CNN
F 1 "GND" H 9905 3277 50  0000 C CNN
F 2 "" H 9900 3450 50  0001 C CNN
F 3 "" H 9900 3450 50  0001 C CNN
	1    9900 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	9550 3550 9550 3450
Wire Wire Line
	9550 3450 9900 3450
Connection ~ 9550 3450
$EndSCHEMATC
